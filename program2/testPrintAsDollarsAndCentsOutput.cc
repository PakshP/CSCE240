// Copyright 2024 bhipp
// initial tests to compare output generated by PrintAsDollarsAndCents
// to expected output
#include<iostream>
using std::cout;
using std::endl;
#include<fstream>
using std::ifstream;
#include<cstring>

int main() {
  system("./testPrintAsDollarsAndCentsCall > student-money-output.txt");
  ifstream student_file("student-money-output.txt");
  if ( !student_file.good() )
    cout << "Issue with student output. Check student-money-output.txt"
         << endl;
  ifstream correct_file("expected-money-output.txt");
  if ( !correct_file.good() )
    cout << "Issue with expected output. Confirm that the file "
         << "\"expected-money-output.txt\" is saved in the current directory "
         << "and then rerun the test." << endl;
  int line = 1;
  char student_line[101] = "";
  char correct_line[101] = "";
  student_file.getline(student_line, 100);
  correct_file.getline(correct_line, 100);
  while ( correct_file.good() ) {
    if ( student_file.good() ) {
      if ( strcmp(correct_line, student_line) == 0 )
        cout << "Passed test " << line << endl;
      else
        cout << "Failed test " << line << "\n\tExpected output: \""
             << correct_line << "\"\n\tStudent output: \"" << student_line
             << "\"" << endl;
      student_file.getline(student_line, 100);
    } else {
      cout << "Failed test " << line << "\n\tExpected output: \""
           << correct_line << "\"\n\tStudent output: \"\"" << endl;
    }
    ++line;
    correct_file.getline(correct_line, 100);
  }
  return 0;
}

